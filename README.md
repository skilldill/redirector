# Redirector

Простой Docker-контейнер на базе nginx для перенаправления запросов с одного домена на другой.

## Описание

Этот проект использует nginx в Docker-контейнере для автоматического перенаправления (301 редирект) всех запросов со старого домена на новый домен с сохранением пути запроса.

## Использование

### 1. Настройка конфигурации

Отредактируйте файл `default.conf` и укажите:
- **Старый домен** (откуда перенаправлять): в параметре `server_name`
- **Новый домен** (куда перенаправлять): в параметре `return 301`

Пример:
```nginx
server {
    listen 80;
    server_name old.domen www.old.domen;
    return 301 https://new.domen$request_uri;
}
```

### 2. Сборка и запуск

#### Вариант 1: Использование скрипта start.sh

```bash
chmod +x start.sh
./start.sh
```

#### Вариант 2: Ручной запуск

```bash
# Сборка образа
docker build -t redirector .

# Запуск контейнера
docker run -d --name redirector -p 80:80 redirector
```

### 3. Проверка работы

После запуска контейнера проверьте редирект:

```bash
curl -I http://old.domen
```

Должен вернуться заголовок `Location: https://new.domen` с кодом `301`.

### 4. Остановка и удаление

```bash
# Остановка контейнера
docker stop redirector

# Удаление контейнера
docker rm redirector
```

## Настройка портов

По умолчанию контейнер слушает порт 80. Чтобы изменить порт, измените параметр `-p` при запуске:

```bash
docker run -d --name redirector -p 8080:80 redirector
```

## Дополнительные настройки

### Перенаправление на HTTPS

Если нужно перенаправлять на HTTPS, убедитесь, что в `default.conf` указан `https://` в URL назначения.

### Перенаправление нескольких доменов

Добавьте дополнительные домены в параметр `server_name` через пробел:

```nginx
server_name old1.domen old2.domen www.old1.domen www.old2.domen;
```

### Изменение типа редиректа

По умолчанию используется постоянный редирект (301). Для временного редиректа (302) измените:

```nginx
return 302 https://new.domen$request_uri;
```

## Структура проекта

```
redirector/
├── Dockerfile          # Конфигурация Docker-образа
├── default.conf        # Конфигурация nginx
├── start.sh            # Скрипт для быстрого запуска
└── README.md           # Документация
```

